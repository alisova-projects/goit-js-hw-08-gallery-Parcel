{"version":3,"sources":["img/gallery-items.js","js/refs.js","js/markup-creation.js","js/on-image-click.js","js/on-close-modal.js","index.js"],"names":["preview","original","description","galleryContainer","document","querySelector","backdrop","backdropOverlay","backdropContent","closeModalBtn","imgInModal","galleryItem","galleryImage","createGalleryItemsMarkup","images","map","join","onImageClick","evt","preventDefault","target","parentItem","closest","classList","contains","add","changeModalImgSourсe","addKeyListeners","window","addEventListener","onRightArrowPress","onLeftArrowPress","elem","src","dataset","source","event","code","currentItem","refs","lastElementChild","changeImage","nextElementSibling","firstElementChild","previousElementSibling","currentActiveItem","nextActiveItem","remove","onCloseModal","querySelectorAll","forEach","el","removeKeyListeners","onBackdropClick","onEscKeyPress","removeEventListener","nextImg","galleryItemMarkup","galleryItems","insertAdjacentHTML"],"mappings":";AAAe,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACb,CACEA,QACE,uFACFC,SACE,uFACFC,YAAa,mBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,6BAEf,CACEF,QACE,wEACFC,SACE,wEACFC,YAAa,qBAEf,CACEF,QACE,0EACFC,SACE,0EACFC,YAAa,iBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,yBAEf,CACEF,QACE,2EACFC,SACE,2EACFC,YAAa,yBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,6EACFC,SACE,6EACFC,YAAa,yBA9DF,QAAA,QAAA;;;;ACAA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACbC,iBAAkBC,SAASC,cAAc,iBACzCC,SAAUF,SAASC,cAAc,aACjCE,gBAAiBH,SAASC,cAAc,sBACxCG,gBAAiBJ,SAASC,cAAc,sBACxCI,cAAeL,SAASC,cACtB,kDAEFK,WAAYN,SAASC,cAAc,uBACnCM,YAAaP,SAASC,cAAc,kBACpCO,aAAcR,SAASC,cAAc,oBAVxB,QAAA,QAAA;;ACoBd,aApBM,SAASQ,EAAyBC,GAChCA,OAAAA,EACJC,IAAI,SAAwC,GAArCf,IAAAA,EAAAA,EAAAA,QAASC,EAAAA,EAAAA,SAAUC,EAAAA,EAAAA,YAKPD,MAAAA,sHAAAA,OAAAA,EAIDD,yGAAAA,OAAAA,EACQC,oCAAAA,OAAAA,EACRC,4BAAAA,OAAAA,EAVjB,8DAgBDc,KAAK,IACT,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,yBAAA;;ACyDA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EA7ED,IAAA,EAAA,EAAA,QAAA,WA6EC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA3Ec,SAASC,EAAaC,GACnCA,EAAIC,iBAEEC,IAAAA,EAASF,EAAIE,OACbC,EAAaD,EAAOE,QAAQ,kBAGlBF,EAAOG,UAAUC,SAAS,oBAKrClB,EAAAA,QAAAA,SAASiB,UAAUE,IAAI,WAG5BC,EAAqBN,GAGrBO,IAGAN,EAAWE,UAAUE,IAAI,oBAG3B,SAASE,IAEPC,OAAOC,iBAAiB,UAAWC,GACnCF,OAAOC,iBAAiB,UAAWE,GAGrC,SAASL,EAAqBM,GACvBtB,EAAAA,QAAAA,WAAWuB,IAAMD,EAAKE,QAAQC,OAKrC,SAASL,EAAkBM,GAGrBA,GAFyB,eAEzBA,EAAMC,KAA+B,CACjCC,IAAAA,EAAclC,SAASC,cAAc,oBAEvCiC,GAAAA,IAAgBC,EAAKpC,QAAAA,iBAAiBqC,iBACxC,OAKFC,EAAYH,EAFKA,EAAYI,qBAMjC,SAASX,EAAiBK,GAGpBA,GAFwB,cAExBA,EAAMC,KAA8B,CAChCC,IAAAA,EAAclC,SAASC,cAAc,oBAEvCiC,GAAAA,IAAgBC,EAAKpC,QAAAA,iBAAiBwC,kBACxC,OAKFF,EAAYH,EAFKA,EAAYM,yBAMjC,SAASH,EAAYI,EAAmBC,GAGtCpB,EAFgBoB,EAAezC,cAAc,oBAI7CwC,EAAkBtB,UAAUwB,OAAO,mBACnCD,EAAevB,UAAUE,IAAI;;ACC9B,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EA7ED,IAAA,EAAA,EAAA,QAAA,WA6EC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA3Ec,SAASuB,EAAaZ,GAC9B9B,EAAAA,QAAAA,SAASiB,UAAUwB,OAAO,WAC1BrC,EAAAA,QAAAA,WAAWuB,IAAM,GAEjB9B,EAAAA,QAAAA,iBACF8C,iBAAiB,iBACjBC,QAAQ,SAAAC,GAAMA,OAAAA,EAAG5B,UAAUwB,OAAO,qBAErCK,IAMF,SAASC,EAAgBjB,GACnBA,EAAMhB,SAAWmB,EAAK7B,QAAAA,YACxBsC,IAKJ,SAASM,EAAclB,GACA,WACUA,EAAMC,MAGnCW,IAIJ,SAASI,IACPxB,OAAO2B,oBAAoB,UAAWD,GACtC1B,OAAO2B,oBAAoB,UAAWzB,GACtCF,OAAO2B,oBAAoB,UAAWxB,GAGxC,SAASD,EAAkBM,GAGrBA,GAFyB,eAEzBA,EAAMC,KAA+B,CACjCC,IAAAA,EAAclC,SAASC,cAAc,oBAEvCiC,GAAAA,IAAgBC,EAAKpC,QAAAA,iBAAiBqC,iBACxC,OAKFC,EAAYH,EAFKA,EAAYI,qBAMjC,SAASX,EAAiBK,GAGpBA,GAFwB,cAExBA,EAAMC,KAA8B,CAChCC,IAAAA,EAAclC,SAASC,cAAc,oBAEvCiC,GAAAA,IAAgBC,EAAKpC,QAAAA,iBAAiBwC,kBACxC,OAKFF,EAAYH,EAFKA,EAAYM,yBAMjC,SAASH,EAAYI,EAAmBC,GAChCU,IAAAA,EAAUV,EAAezC,cAAc,mBAE7CqB,qBAAqB8B,GAErBX,EAAkBtB,UAAUwB,OAAO,mBACnCD,EAAevB,UAAUE,IAAI,mBA9D/Bc,EAAKhC,QAAAA,gBAAgBsB,iBAAiB,QAASwB;;ACC/C,aAfA,IAAA,EAAA,EAAA,QAAA,wBACA,QAAA,qBACA,IAAA,EAAA,EAAA,QAAA,cAGA,EAAA,QAAA,wBAOA,EAAA,EAAA,QAAA,wBAIA,EAAA,EAAA,QAAA,wBADA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GATA,IAAMI,GAAoB,EAAyBC,EAAAA,0BAAAA,EAAzB,SAE1BnB,EAAKpC,QAAAA,iBAAiBwD,mBAAmB,YAAaF,GAGtDlB,EAAKpC,QAAAA,iBAAiB0B,iBAAiB,QAASZ,EAAhD,SAIAsB,EAAK9B,QAAAA,cAAcoB,iBAAiB,QAASmB,EAA7C","file":"src.a03cf6df.js","sourceRoot":"..\\src","sourcesContent":["export default [\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825_1280.jpg\",\r\n    description: \"Hokkaido Flower\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg\",\r\n    description: \"Container Haulage Freight\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg\",\r\n    description: \"Aerial Beach View\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg\",\r\n    description: \"Flower Blooms\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg\",\r\n    description: \"Alpine Mountains\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg\",\r\n    description: \"Mountain Lake Sailing\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg\",\r\n    description: \"Alpine Spring Meadows\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg\",\r\n    description: \"Nature Landscape\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg\",\r\n    description: \"Lighthouse Coast Sea\",\r\n  },\r\n];\r\n","export default {\r\n  galleryContainer: document.querySelector('ul.js-gallery'),\r\n  backdrop: document.querySelector('.lightbox'),\r\n  backdropOverlay: document.querySelector('.lightbox__overlay'),\r\n  backdropContent: document.querySelector('.lightbox__content'),\r\n  closeModalBtn: document.querySelector(\r\n    \".lightbox button[data-action='close-lightbox']\",\r\n  ),\r\n  imgInModal: document.querySelector('img.lightbox__image'),\r\n  galleryItem: document.querySelector('.gallery__item'),\r\n  galleryImage: document.querySelector('.gallery__image'),\r\n};\r\n","export function createGalleryItemsMarkup(images) {\r\n  return images\r\n    .map(({ preview, original, description }) => {\r\n      return `\r\n        <li class=\"gallery__item\">\r\n            <a\r\n                class=\"gallery__link\"\r\n                href=\"${original}\"\r\n            >\r\n                <img\r\n                class=\"gallery__image\"\r\n                src=\"${preview}\"\r\n                data-source=\"${original}\"\r\n                alt=\"${description}\"\r\n                />\r\n            </a>\r\n        </li>\r\n`;\r\n    })\r\n    .join('');\r\n}\r\n","import refs from './refs';\r\n\r\nexport default function onImageClick(evt) {\r\n  evt.preventDefault();\r\n\r\n  const target = evt.target;\r\n  const parentItem = target.closest('.gallery__item');\r\n\r\n  // проверяем, чтобы клик был точно по изображению\r\n  const isImage = target.classList.contains('gallery__image');\r\n  if (!isImage) {\r\n    return;\r\n  }\r\n  // добавляем класс открытия модалки\r\n  refs.backdrop.classList.add('is-open');\r\n\r\n  // устанавливаем новый src элемента img.lightbox__image\r\n  changeModalImgSourсe(target);\r\n\r\n  // вешаем слушатели клавиатуры\r\n  addKeyListeners();\r\n\r\n  // вешаем активный класс на картинку, кот. открывается в модалке\r\n  parentItem.classList.add('lightbox__image');\r\n}\r\n\r\nfunction addKeyListeners() {\r\n  //   window.addEventListener('keydown', onEscKeyPress);\r\n  window.addEventListener('keydown', onRightArrowPress);\r\n  window.addEventListener('keydown', onLeftArrowPress);\r\n}\r\n\r\nfunction changeModalImgSourсe(elem) {\r\n  refs.imgInModal.src = elem.dataset.source;\r\n}\r\n\r\n// перелистывание картинок\r\n\r\nfunction onRightArrowPress(event) {\r\n  const RIGHT_ARROW_KEY_CODE = 'ArrowRight';\r\n\r\n  if (event.code === RIGHT_ARROW_KEY_CODE) {\r\n    const currentItem = document.querySelector('.lightbox__image');\r\n\r\n    if (currentItem === refs.galleryContainer.lastElementChild) {\r\n      return;\r\n    }\r\n\r\n    const nextItem = currentItem.nextElementSibling;\r\n\r\n    changeImage(currentItem, nextItem);\r\n  }\r\n}\r\n\r\nfunction onLeftArrowPress(event) {\r\n  const LEFT_ARROW_KEY_CODE = 'ArrowLeft';\r\n\r\n  if (event.code === LEFT_ARROW_KEY_CODE) {\r\n    const currentItem = document.querySelector('.lightbox__image');\r\n\r\n    if (currentItem === refs.galleryContainer.firstElementChild) {\r\n      return;\r\n    }\r\n\r\n    const nextItem = currentItem.previousElementSibling;\r\n\r\n    changeImage(currentItem, nextItem);\r\n  }\r\n}\r\n\r\nfunction changeImage(currentActiveItem, nextActiveItem) {\r\n  const nextImg = nextActiveItem.querySelector('.gallery__image');\r\n\r\n  changeModalImgSourсe(nextImg);\r\n\r\n  currentActiveItem.classList.remove('lightbox__image');\r\n  nextActiveItem.classList.add('lightbox__image');\r\n}\r\n","import refs from './refs';\r\n\r\nexport default function onCloseModal(event) {\r\n  refs.backdrop.classList.remove('is-open');\r\n  refs.imgInModal.src = '';\r\n\r\n  refs.galleryContainer\r\n    .querySelectorAll('gallery__item')\r\n    .forEach(el => el.classList.remove('lightbox__image'));\r\n\r\n  removeKeyListeners();\r\n}\r\n\r\n// закрытие модалки по клику на оверлей\r\nrefs.backdropOverlay.addEventListener('click', onBackdropClick);\r\n\r\nfunction onBackdropClick(event) {\r\n  if (event.target !== refs.imgInModal) {\r\n    onCloseModal();\r\n  }\r\n}\r\n\r\n// закрытие модалки по нажатию клавиши ESC\r\nfunction onEscKeyPress(event) {\r\n  const ESC_KEY_CODE = 'Escape';\r\n  const isEsc = ESC_KEY_CODE === event.code;\r\n\r\n  if (isEsc) {\r\n    onCloseModal();\r\n  }\r\n}\r\n\r\nfunction removeKeyListeners() {\r\n  window.removeEventListener('keydown', onEscKeyPress);\r\n  window.removeEventListener('keydown', onRightArrowPress);\r\n  window.removeEventListener('keydown', onLeftArrowPress);\r\n}\r\n\r\nfunction onRightArrowPress(event) {\r\n  const RIGHT_ARROW_KEY_CODE = 'ArrowRight';\r\n\r\n  if (event.code === RIGHT_ARROW_KEY_CODE) {\r\n    const currentItem = document.querySelector('.lightbox__image');\r\n\r\n    if (currentItem === refs.galleryContainer.lastElementChild) {\r\n      return;\r\n    }\r\n\r\n    const nextItem = currentItem.nextElementSibling;\r\n\r\n    changeImage(currentItem, nextItem);\r\n  }\r\n}\r\n\r\nfunction onLeftArrowPress(event) {\r\n  const LEFT_ARROW_KEY_CODE = 'ArrowLeft';\r\n\r\n  if (event.code === LEFT_ARROW_KEY_CODE) {\r\n    const currentItem = document.querySelector('.lightbox__image');\r\n\r\n    if (currentItem === refs.galleryContainer.firstElementChild) {\r\n      return;\r\n    }\r\n\r\n    const nextItem = currentItem.previousElementSibling;\r\n\r\n    changeImage(currentItem, nextItem);\r\n  }\r\n}\r\n\r\nfunction changeImage(currentActiveItem, nextActiveItem) {\r\n  const nextImg = nextActiveItem.querySelector('.gallery__image');\r\n\r\n  changeModalImgSourсe(nextImg);\r\n\r\n  currentActiveItem.classList.remove('lightbox__image');\r\n  nextActiveItem.classList.add('lightbox__image');\r\n}\r\n","import galleryItems from './img/gallery-items';\r\nimport './css/styles.scss';\r\nimport refs from './js/refs';\r\n\r\n// создаём разметку галлереи\r\nimport { createGalleryItemsMarkup } from './js/markup-creation';\r\nconst galleryItemMarkup = createGalleryItemsMarkup(galleryItems);\r\n\r\nrefs.galleryContainer.insertAdjacentHTML('beforeend', galleryItemMarkup);\r\n\r\n//вешаем слушателя событий\r\nrefs.galleryContainer.addEventListener('click', onImageClick);\r\nimport onImageClick from './js/on-image-click';\r\n\r\n// зыкрытие модалки\r\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\r\nimport onCloseModal from './js/on-close-modal';\r\n"]}